<style>
    @keyframes skeleton {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
</style>
<script>
    // State management for Endpoints and JS Files tabs
    const endpointsState = {
        loaded: false,
        currentPage: 1,
        perPage: 100,
        clientPerPage: 100,  // Items per page on client-side
        search: '',
        exclude: '',
        category: '',
        status: '',
        cachedData: null,  // Cache all loaded endpoints
        totalPages: 1
    };

    const jsfilesState = {
        loaded: false,
        currentPage: 1,
        perPage: 100,
        clientPerPage: 100,
        search: '',
        exclude: '',
        statusFilter: '',
        secretsFilter: '',
        cachedData: null,
        totalPages: 1
    };

    // Load Endpoints data via AJAX
    async function loadEndpointsData(forceReload = false) {
        // Show loading header if first load
        if (!endpointsState.loaded) {
            showEndpointsLoading();
        } else {
            // If navigating, show loading overlay or keep content but opacity reduced
            document.getElementById('endpoints-content').style.opacity = '0.5';
        }

        const params = new URLSearchParams({
            page: endpointsState.currentPage,
            per_page: endpointsState.perPage,
            search: endpointsState.search,
            exclude: endpointsState.exclude,
            category: endpointsState.category,
            status: endpointsState.status
        });

        try {
            const response = await fetch(`/api/projects/{{ project.id }}/endpoints?${params}`);
            const data = await response.json();

            document.getElementById('endpoints-content').style.opacity = '1.0';

            if (!data.has_data) {
                document.getElementById('endpoints-loading').style.display = 'none';
                document.getElementById('endpoints-empty').style.display = 'block';
                return;
            }

            // Update state total pages from server calculation
            endpointsState.totalPages = data.total_pages;

            // Update last scan date
            if (data.snapshot_date) {
                const date = new Date(data.snapshot_date);
                document.getElementById('endpoints-last-scan').textContent = date.toLocaleString();
            }

            // Render table directly with server data
            renderEndpointsTable(data);
            renderEndpointsPagination(data);

            document.getElementById('endpoints-loading').style.display = 'none';
            document.getElementById('endpoints-content').style.display = 'block';

            endpointsState.loaded = true;
        } catch (error) {
            console.error('Error loading endpoints:', error);
            document.getElementById('endpoints-content').style.opacity = '1.0';
            document.getElementById('endpoints-loading').innerHTML = `
            <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #dc2626; margin-bottom: 1rem;"></i>
                <h3 style="color: #64748b;">Failed to Load Endpoints</h3>
                <p style="color: #94a3b8;">${error.message}</p>
                <button onclick="loadEndpointsData(true)" style="margin-top: 1rem; padding: 0.625rem 1.25rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">
                    <i class="fas fa-redo"></i> Retry
                </button>
            </div>
        `;
        }
    }

    // Render endpoints from cached data (DEPRECATED - Removed in favor of Server Side Pagination)
    // kept as empty function if referenced elsewhere, but logic moved to renderEndpointsTable
    function renderEndpointsFromCache() {
        // This function is no longer used as pagination is now server-side.
        // Its previous logic has been integrated directly into loadEndpointsData.
    }

    // Show loading with skeleton effect
    function showEndpointsLoading() {
        const loadingEl = document.getElementById('endpoints-loading');
        loadingEl.style.display = 'block';
        loadingEl.innerHTML = `
        <div style="padding: 2rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <div style="height: 24px; width: 200px; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
                <div style="height: 20px; width: 150px; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
            </div>
            <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                ${[1, 2, 3, 4, 5].map(() => `
                    <div style="display: flex; gap: 1rem; padding: 1rem 0; border-bottom: 1px solid #f1f5f9;">
                        <div style="height: 20px; width: 40px; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
                        <div style="height: 20px; width: 80px; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
                        <div style="height: 20px; flex: 1; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
                        <div style="height: 20px; width: 150px; background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 4px;"></div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
    }



    // Render Endpoints table
    function renderEndpointsTable(data, baseIndex = 0) {
        const tbody = document.getElementById('endpoints-table-body');
        tbody.innerHTML = '';

        if (data.endpoints.length === 0) {
            tbody.innerHTML = `
            <tr>
                <td colspan="5" style="padding: 3rem; text-align: center; color: #94a3b8;">
                    <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 0.5rem; display: block;"></i>
                    No endpoints found matching your filters
                </td>
            </tr>
        `;
            document.getElementById('endpoints-count-display').textContent = '0 endpoints';
            return;
        }

        data.endpoints.forEach((endpoint, index) => {
            const row = document.createElement('tr');
            row.style.borderBottom = '1px solid #f1f5f9';
            row.style.transition = 'background 0.2s';
            row.onmouseover = () => row.style.background = '#f8fafc';
            row.onmouseout = () => row.style.background = 'white';

            const startIndex = (data.page - 1) * data.per_page + index + 1;

            // Status badge
            let statusBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #f1f5f9; color: #64748b;">-</span>';
            if (endpoint.status_code) {
                if (endpoint.status_code < 300) {
                    statusBadge = `<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #dcfce7; color: #166534;">${endpoint.status_code}</span>`;
                } else if (endpoint.status_code < 400) {
                    statusBadge = `<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #dbeafe; color: #1e40af;">${endpoint.status_code}</span>`;
                } else if (endpoint.status_code < 500) {
                    statusBadge = `<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fef3c7; color: #92400e;">${endpoint.status_code}</span>`;
                } else {
                    statusBadge = `<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fee2e2; color: #991b1b;">${endpoint.status_code}</span>`;
                }
            }

            // Categories badges
            let categoriesBadges = '<span style="color: #94a3b8;">-</span>';
            if (endpoint.categories && endpoint.categories.length > 0) {
                categoriesBadges = endpoint.categories.map(cat =>
                    `<span style="padding: 0.25rem 0.5rem; border-radius: 6px; font-size: 0.7rem; font-weight: 600; background-color: ${cat.color}; color: white; margin: 2px; display: inline-block;">
                    <i class="fas ${cat.icon}"></i> ${cat.name}
                </span>`
                ).join('');
            }

            row.innerHTML = `
            <td style="padding: 1rem; color: #64748b; font-size: 0.875rem;">${startIndex}</td>
            <td style="padding: 1rem;">${statusBadge}</td>
            <td style="padding: 1rem;">${categoriesBadges}</td>
            <td style="padding: 1rem;">
                <a href="${endpoint.url}" target="_blank" style="color: #667eea; text-decoration: none; font-family: monospace; font-size: 0.875rem; word-break: break-all; display: inline-flex; align-items: center; gap: 0.25rem;"
                   onmouseover="this.style.textDecoration='underline'"
                   onmouseout="this.style.textDecoration='none'">
                    ${endpoint.url}
                    <i class="fas fa-external-link-alt" style="font-size: 0.7rem; opacity: 0.6;"></i>
                </a>
            </td>
            <td style="padding: 1rem; max-width: 220px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${endpoint.title || ''}">
                ${endpoint.title || '<span style="color: #94a3b8;">-</span>'}
            </td>
        `;

            tbody.appendChild(row);
        });

        // Update counters
        // Update counters
        // Force update using querySelector for robustness
        const countDisplay = document.querySelector('#endpoints-count-display');
        if (countDisplay) {
            countDisplay.innerText = `${data.total} endpoint${data.total !== 1 ? 's' : ''}`;
        } else {
            console.error('Could not find endpoints-count-display');
        }
        document.getElementById('endpoints-showing-start').textContent = data.showing_start;
        document.getElementById('endpoints-showing-end').textContent = data.showing_end;
        document.getElementById('endpoints-total').textContent = data.total;
    }

    // Render Endpoints pagination
    function renderEndpointsPagination(data) {
        const container = document.getElementById('endpoints-pagination');
        container.innerHTML = '';

        if (data.total_pages <= 1) return;

        // Previous button
        const prevBtn = document.createElement('button');
        prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Prev';
        prevBtn.style.cssText = 'padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 8px; background: white; color: #475569; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';
        prevBtn.disabled = data.page === 1;
        if (prevBtn.disabled) {
            prevBtn.style.opacity = '0.5';
            prevBtn.style.cursor = 'not-allowed';
        }
        prevBtn.onclick = () => gotoEndpointsPage(data.page - 1);
        container.appendChild(prevBtn);

        // Page numbers
        const maxPages = 5;
        let startPage = Math.max(1, data.page - Math.floor(maxPages / 2));
        let endPage = Math.min(data.total_pages, startPage + maxPages - 1);

        if (endPage - startPage < maxPages - 1) {
            startPage = Math.max(1, endPage - maxPages + 1);
        }

        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.textContent = i;
            pageBtn.style.cssText = 'padding: 0.5rem 0.875rem; border: 2px solid #e2e8f0; border-radius: 8px; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';

            if (i === data.page) {
                pageBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                pageBtn.style.color = 'white';
                pageBtn.style.borderColor = '#667eea';
            } else {
                pageBtn.style.background = 'white';
                pageBtn.style.color = '#475569';
            }

            pageBtn.onclick = () => gotoEndpointsPage(i);
            container.appendChild(pageBtn);
        }

        // Next button
        const nextBtn = document.createElement('button');
        nextBtn.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
        nextBtn.style.cssText = 'padding: 0.5rem 1rem; border: 2px solid #e2e8f0; border-radius: 8px; background: white; color: #475569; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';
        nextBtn.disabled = data.page === data.total_pages;
        if (nextBtn.disabled) {
            nextBtn.style.opacity = '0.5';
            nextBtn.style.cursor = 'not-allowed';
        }
        nextBtn.onclick = () => gotoEndpointsPage(data.page + 1);
        container.appendChild(nextBtn);
    }

    // Navigate to Endpoints page
    function gotoEndpointsPage(page) {
        endpointsState.currentPage = page;

        // Smooth scroll to top of table
        document.getElementById('endpoints-content').scrollIntoView({ behavior: 'smooth', block: 'start' });

        loadEndpointsData();
    }

    // Apply Endpoints filters
    function applyEndpointsFilters() {
        endpointsState.search = document.getElementById('endpoints-search').value.trim();
        endpointsState.exclude = document.getElementById('endpoints-exclude').value.trim();
        endpointsState.category = document.getElementById('endpoints-category').value;
        endpointsState.status = document.getElementById('endpoints-status').value;
        endpointsState.perPage = parseInt(document.getElementById('endpoints-per-page').value);
        endpointsState.currentPage = 1;
        endpointsState.loaded = false;
        endpointsState.cachedData = null;  // Clear cache to reload with new filters

        // Show loading
        document.getElementById('endpoints-content').style.display = 'none';
        showEndpointsLoading();

        loadEndpointsData();
    }

    // Reset Endpoints filters
    function resetEndpointsFilters() {
        document.getElementById('endpoints-search').value = '';
        document.getElementById('endpoints-exclude').value = '';
        document.getElementById('endpoints-category').value = '';
        document.getElementById('endpoints-status').value = '';
        document.getElementById('endpoints-per-page').value = '100';
        applyEndpointsFilters();
    }

    // Load JS Files data via AJAX
    async function loadJSFilesData() {
        if (jsfilesState.loaded) {
            document.getElementById('jsfiles-loading').style.display = 'none';
            document.getElementById('jsfiles-content').style.display = 'block';
            return;
        }

        const params = new URLSearchParams({
            page: jsfilesState.currentPage,
            per_page: jsfilesState.perPage,
            per_page: jsfilesState.perPage,
            search: jsfilesState.search,
            exclude: jsfilesState.exclude,
            status_filter: jsfilesState.statusFilter,
            secrets_filter: jsfilesState.secretsFilter
        });

        try {
            const response = await fetch(`/api/projects/{{ project.id }}/jsfiles?${params}`);
            const data = await response.json();

            if (!data.has_data) {
                document.getElementById('jsfiles-loading').style.display = 'none';
                document.getElementById('jsfiles-empty').style.display = 'block';
                return;
            }

            renderJSFilesTable(data);
            renderJSFilesPagination(data);

            // Update last scan date
            if (data.snapshot_date) {
                const date = new Date(data.snapshot_date);
                document.getElementById('jsfiles-last-scan').textContent = date.toLocaleString();
            }

            // Show secrets alert if any
            if (data.secrets_count > 0) {
                document.getElementById('jsfiles-secrets-count').textContent = data.secrets_count;
                document.getElementById('jsfiles-secrets-alert').style.display = 'block';
            } else {
                document.getElementById('jsfiles-secrets-alert').style.display = 'none';
            }

            document.getElementById('jsfiles-loading').style.display = 'none';
            document.getElementById('jsfiles-content').style.display = 'block';

            jsfilesState.loaded = true;
        } catch (error) {
            console.error('Error loading JS files:', error);
            document.getElementById('jsfiles-loading').innerHTML = `
            <div style="text-align: center; padding: 3rem;">
                <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #dc2626; margin-bottom: 1rem;"></i>
                <h3 style="color: #64748b;">Failed to Load JS Files</h3>
                <p style="color: #94a3b8;">${error.message}</p>
                <button onclick="loadJSFilesData()" style="margin-top: 1rem; padding: 0.625rem 1.25rem; background: #f59e0b; color: white; border: none; border-radius: 8px; cursor: pointer;">
                    <i class="fas fa-redo"></i> Retry
                </button>
            </div>
        `;
        }
    }

    // Render JS Files table
    function renderJSFilesTable(data) {
        const tbody = document.getElementById('jsfiles-table-body');
        tbody.innerHTML = '';

        if (data.js_files.length === 0) {
            tbody.innerHTML = `
            <tr>
                <td colspan="5" style="padding: 3rem; text-align: center; color: #94a3b8;">
                    <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 0.5rem; display: block;"></i>
                    No JS files found matching your filters
                </td>
            </tr>
        `;
            document.getElementById('jsfiles-count-display').textContent = '0 files';
            return;
        }

        data.js_files.forEach((file, index) => {
            const row = document.createElement('tr');
            row.style.borderBottom = '1px solid #fef3c7';
            row.style.transition = 'background 0.2s';
            row.onmouseover = () => row.style.background = '#fffbeb';
            row.onmouseout = () => row.style.background = 'white';

            const startIndex = (data.page - 1) * data.per_page + index + 1;

            // Status badge
            let statusBadge = '';
            if (file.status === 'active') {
                statusBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #dcfce7; color: #166534;"><i class="fas fa-check-circle"></i> Active</span>';
            } else if (file.status === 'inactive') {
                statusBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fee2e2; color: #991b1b;"><i class="fas fa-times-circle"></i> Inactive</span>';
            } else {
                statusBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #f1f5f9; color: #64748b;"><i class="fas fa-question-circle"></i> Unknown</span>';
            }

            // Secrets badge
            let secretsBadge = '';
            if (file.has_secrets) {
                if (file.risk_level === 'high') {
                    secretsBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fee2e2; color: #991b1b;"><i class="fas fa-skull-crossbones"></i> High Risk</span>';
                } else if (file.risk_level === 'medium') {
                    secretsBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fef3c7; color: #92400e;"><i class="fas fa-exclamation-triangle"></i> Medium</span>';
                } else {
                    secretsBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #fed7aa; color: #78350f;"><i class="fas fa-exclamation-circle"></i> Low Risk</span>';
                }
            } else {
                secretsBadge = '<span style="padding: 0.25rem 0.625rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; background: #dcfce7; color: #166534;"><i class="fas fa-shield-check"></i> Clean</span>';
            }

            row.innerHTML = `
            <td style="padding: 1rem; color: #64748b; font-size: 0.875rem;">${startIndex}</td>
            <td style="padding: 1rem;">${statusBadge}</td>
            <td style="padding: 1rem;">
                <a href="${file.url}" target="_blank" style="color: #f59e0b; text-decoration: none; font-family: monospace; font-size: 0.875rem; word-break: break-all; display: inline-flex; align-items: center; gap: 0.25rem;"
                   onmouseover="this.style.textDecoration='underline'"
                   onmouseout="this.style.textDecoration='none'">
                    ${file.url}
                    <i class="fas fa-external-link-alt" style="font-size: 0.7rem; opacity: 0.6;"></i>
                </a>
            </td>
            <td style="padding: 1rem;">${secretsBadge}</td>
            <td style="padding: 1rem;">
                <button onclick="copyToClipboard('${file.url.replace(/'/g, "\\'")}') "
                        style="padding: 0.375rem 0.75rem; background: white; border: 2px solid #e2e8f0; border-radius: 6px; cursor: pointer; font-size: 0.75rem; font-weight: 600; color: #475569; transition: all 0.2s;"
                        onmouseover="this.style.borderColor='#f59e0b'; this.style.color='#f59e0b'"
                        onmouseout="this.style.borderColor='#e2e8f0'; this.style.color='#475569'"
                        title="Copy URL">
                    <i class="fas fa-copy"></i>
                </button>
            </td>
        `;

            tbody.appendChild(row);
        });

        // Update counters
        document.getElementById('jsfiles-count-display').textContent = `${data.total} file${data.total !== 1 ? 's' : ''}`;
        document.getElementById('jsfiles-showing-start').textContent = data.showing_start;
        document.getElementById('jsfiles-showing-end').textContent = data.showing_end;
        document.getElementById('jsfiles-total').textContent = data.total;
    }

    // Render JS Files pagination
    function renderJSFilesPagination(data) {
        const container = document.getElementById('jsfiles-pagination');
        container.innerHTML = '';

        if (data.total_pages <= 1) return;

        // Previous button
        const prevBtn = document.createElement('button');
        prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Prev';
        prevBtn.style.cssText = 'padding: 0.5rem 1rem; border: 2px solid #fde68a; border-radius: 8px; background: white; color: #78350f; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';
        prevBtn.disabled = data.page === 1;
        if (prevBtn.disabled) {
            prevBtn.style.opacity = '0.5';
            prevBtn.style.cursor = 'not-allowed';
        }
        prevBtn.onclick = () => gotoJSFilesPage(data.page - 1);
        container.appendChild(prevBtn);

        // Page numbers
        const maxPages = 5;
        let startPage = Math.max(1, data.page - Math.floor(maxPages / 2));
        let endPage = Math.min(data.total_pages, startPage + maxPages - 1);

        if (endPage - startPage < maxPages - 1) {
            startPage = Math.max(1, endPage - maxPages + 1);
        }

        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.textContent = i;
            pageBtn.style.cssText = 'padding: 0.5rem 0.875rem; border: 2px solid #fde68a; border-radius: 8px; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';

            if (i === data.page) {
                pageBtn.style.background = 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)';
                pageBtn.style.color = 'white';
                pageBtn.style.borderColor = '#f59e0b';
            } else {
                pageBtn.style.background = 'white';
                pageBtn.style.color = '#78350f';
            }

            pageBtn.onclick = () => gotoJSFilesPage(i);
            container.appendChild(pageBtn);
        }

        // Next button
        const nextBtn = document.createElement('button');
        nextBtn.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
        nextBtn.style.cssText = 'padding: 0.5rem 1rem; border: 2px solid #fde68a; border-radius: 8px; background: white; color: #78350f; cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all 0.2s;';
        nextBtn.disabled = data.page === data.total_pages;
        if (nextBtn.disabled) {
            nextBtn.style.opacity = '0.5';
            nextBtn.style.cursor = 'not-allowed';
        }
        nextBtn.onclick = () => gotoJSFilesPage(data.page + 1);
        container.appendChild(nextBtn);
    }

    // Navigate to JS Files page
    function gotoJSFilesPage(page) {
        jsfilesState.currentPage = page;
        jsfilesState.loaded = false;
        loadJSFilesData();
    }

    // Apply JS Files filters
    function applyJSFilesFilters() {
        jsfilesState.search = document.getElementById('jsfiles-search').value.trim();
        jsfilesState.exclude = document.getElementById('jsfiles-exclude').value.trim();
        jsfilesState.statusFilter = document.getElementById('jsfiles-status').value;
        jsfilesState.secretsFilter = document.getElementById('jsfiles-secrets').value;
        jsfilesState.perPage = parseInt(document.getElementById('jsfiles-per-page').value);
        jsfilesState.currentPage = 1;
        jsfilesState.loaded = false;

        // Show loading
        document.getElementById('jsfiles-content').style.display = 'none';
        document.getElementById('jsfiles-loading').style.display = 'block';
        document.getElementById('jsfiles-loading').innerHTML = `
        <div style="text-align: center; padding: 3rem;">
            <div style="display: inline-block; padding: 2rem; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 50%; margin-bottom: 1.5rem;">
                <i class="fas fa-spinner fa-spin" style="font-size: 3rem; color: white;"></i>
            </div>
            <h3 style="color: #1e293b;">Applying Filters...</h3>
        </div>
    `;

        loadJSFilesData();
    }

    // Reset JS Files filters
    function resetJSFilesFilters() {
        document.getElementById('jsfiles-search').value = '';
        document.getElementById('jsfiles-exclude').value = '';
        document.getElementById('jsfiles-status').value = '';
        document.getElementById('jsfiles-secrets').value = '';
        document.getElementById('jsfiles-per-page').value = '100';
        applyJSFilesFilters();
    }

    // Copy to clipboard utility
    function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
            showToast('URL copied to clipboard!', 'success');
        }).catch(() => {
            showToast('Failed to copy URL', 'error');
        });
    }
</script>